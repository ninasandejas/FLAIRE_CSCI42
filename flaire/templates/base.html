{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://fonts.googleapis.com/css?family=Playfair Display' rel='stylesheet'>
    {% block styles %}{% endblock %}
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    <title>Flaire</title>
</head>

<body class="for-specific">
    <nav id="header">
        <ul class="navbar">
            <li class="{% if active_tab == 'home'%}active{% endif %}" style="float:left">
                <a href="{% url 'home'%}">FLAIRE</a>
            </li>
            <li class="{% if active_tab == 'explore' %}active{% endif %}">
                <a href="{% url 'social:explore' %}">explore</a>
            </li>
            <li class="{% if active_tab == 'following' %}active{% endif %}">
                <a href="{% url 'social:following' %}">following</a>
            </li>
            <li class="{% if active_tab == 'wishlist'%}active{% endif %}">
                <a href="{% url 'user_management:wishlist' %}">wishlist</a>
            </li>
            <li class="{% if active_tab == 'showrooms'%}active{% endif %}">
                <a href="{% url 'showrooms:showrooms' %}">showrooms</a>
            </li>
            <li class="{% if active_tab == 'closet'%}active{% endif %}">
                <a href="{% url 'closet:closet' %}">closet</a>
            </li>
            {% if request.user.is_authenticated %}
            <li class="{% if active_tab == 'closet'%}active{% endif %}">
                <form method="POST" action="{% url 'logout' %}" class = "logout-form">
                    {% csrf_token %}
                    <button type="submit" class="logout-button">Logout</button>
                </form>
            </li>
            <li class="{% if active_tab == 'profile'%}active{% endif %}">
                <a href="{% url 'user_management:profile' %}">
                    <img src="{{ user.profile.profile_picture.url }}" alt="User Profile" style="height: 24px">
                </a>
            </li>
            {% else %}
            {% if request.resolver_match.url_name != 'login' and request.resolver_match.url_name != 'signup' %}
            <li>
                <a href="{% url 'user_management:login' %}">
                    login
                </a>
            </li>
            {% endif %}
            {% endif %}

           
        </ul>
    </nav>
    {% block content %}{% endblock %}
    {% block scripts %}{% endblock %}
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        console.log('DOM fully loaded and parsed'); // Debugging log

        const modals = document.querySelectorAll('.modal');
        const editProfileModal = document.getElementById('edit-profile-modal');
        const ootdModal = document.getElementById('ootd-modal');

        const editIcon = document.querySelector('.edit-icon');
        const addOotdBtn = document.getElementById('add-ootd-btn');
        const manageOotdBtn = document.getElementById('manage-ootd-btn');

        const closeModalButtons = document.querySelectorAll('.close-modal');

        if (editIcon) {
          editIcon.addEventListener('click', (e) => {
            e.preventDefault();
            console.log('Edit Profile button clicked'); // Debugging log
            editProfileModal.style.display = 'block';
          });
        }

        if (addOotdBtn) {
          addOotdBtn.addEventListener('click', () => {
            console.log('Add OOTD button clicked'); // Debugging log
            ootdModal.style.display = 'block';
          });
        }

        if (manageOotdBtn) {
          manageOotdBtn.addEventListener('click', () => {
            console.log('Manage OOTD button clicked'); // Debugging log
            ootdModal.style.display = 'block';
          });
        }

        closeModalButtons.forEach((button) => {
          button.addEventListener('click', () => {
            console.log('Close button clicked'); // Debugging log
            modals.forEach((modal) => {
              modal.style.display = 'none';
            });
          });
        });

        window.addEventListener('click', (e) => {
          modals.forEach((modal) => {
            if (e.target === modal) {
              console.log('Clicked outside modal'); // Debugging log
              modal.style.display = 'none';
            }
          });
        });
      });
    </script>
</body>

</html>